#pragma checksum "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "69214739e022d4baa7ca7feef577edc0d3a6dd83"
// <auto-generated/>
#pragma warning disable 1591
namespace treyd.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
#nullable restore
#line 1 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Microsoft.AspNetCore.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Category;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Product;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Toolbars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Cart;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Sidebars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Redirects;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Admin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.Alerts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using treyd.Components.SignInSignUp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Inputs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Buttons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Navigations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 32 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.SplitButtons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 33 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Cards;

#line default
#line hidden
#nullable disable
#nullable restore
#line 34 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
#nullable restore
#line 35 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Spinner;

#line default
#line hidden
#nullable disable
#nullable restore
#line 36 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using Syncfusion.Blazor.Popups;

#line default
#line hidden
#nullable disable
#nullable restore
#line 38 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using BlazorPro.BlazorSize;

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using QuickPay.SDK.Models.Payments;

#line default
#line hidden
#nullable disable
#nullable restore
#line 40 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\_Imports.razor"
using QuickPay.SDK.Models.Subscriptions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
using DataLibrary;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
using Microsoft.Extensions.Configuration;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
using Microsoft.AspNetCore.WebUtilities;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/brukari/kassi/kvittan")]
    public partial class ReceiptPage : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(0);
            __builder.AddAttribute(1, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.OpenComponent<treyd.Components.Redirects.IndexRedirect>(2);
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(3, "\r\n\r\n");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "container mb-5");
            __builder.AddAttribute(6, "b-wgmrqjvt82");
            __builder.AddMarkupContent(7, "<div class=\"py-5 text-center\" style=\"padding-top: 0 !important;\" b-wgmrqjvt82><h1 class=\"text-info mt-4\" b-wgmrqjvt82>Kassi</h1></div>\r\n\r\n    ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "row g-5");
            __builder.AddAttribute(10, "b-wgmrqjvt82");
            __builder.OpenElement(11, "div");
            __builder.AddAttribute(12, "class", "col-12");
            __builder.AddAttribute(13, "b-wgmrqjvt82");
            __builder.OpenElement(14, "div");
            __builder.AddAttribute(15, "class", "row");
            __builder.AddAttribute(16, "b-wgmrqjvt82");
            __builder.OpenElement(17, "ul");
            __builder.AddAttribute(18, "id", "progressbar");
            __builder.AddAttribute(19, "class", "text-center");
            __builder.AddAttribute(20, "b-wgmrqjvt82");
            __builder.OpenElement(21, "li");
            __builder.AddAttribute(22, "class", 
#nullable restore
#line 29 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                cartActive

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(23, "b-wgmrqjvt82");
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n                    ");
            __builder.OpenElement(25, "li");
            __builder.AddAttribute(26, "class", 
#nullable restore
#line 30 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                paymentActive

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(27, "b-wgmrqjvt82");
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\r\n                    ");
            __builder.OpenElement(29, "li");
            __builder.AddAttribute(30, "class", 
#nullable restore
#line 31 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                recieptActive

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(31, "b-wgmrqjvt82");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\r\n            ");
            __builder.AddMarkupContent(33, "<div class=\"row\" b-wgmrqjvt82><ul class=\"progress-text text-center\" b-wgmrqjvt82><li b-wgmrqjvt82>Kurv</li>\r\n                    <li b-wgmrqjvt82>Gjalding</li>\r\n                    <li b-wgmrqjvt82>Kvittan</li></ul></div>\r\n            ");
            __builder.OpenElement(34, "nav");
            __builder.AddAttribute(35, "style", "display: none;");
            __builder.AddAttribute(36, "b-wgmrqjvt82");
            __builder.OpenElement(37, "div");
            __builder.AddAttribute(38, "class", "nav nav-tabs flex-sm-row");
            __builder.AddAttribute(39, "id", "progressbar");
            __builder.AddAttribute(40, "role", "tablist");
            __builder.AddAttribute(41, "b-wgmrqjvt82");
            __builder.AddMarkupContent(42, @"<button class=""flex-sm-fill btn-lg nav-link "" id=""nav-cart-tab"" data-bs-toggle=""tab"" type=""button"" role=""tab"" aria-controls=""nav-cart"" aria-selected=""true"" b-wgmrqjvt82></button>
                    <button class=""flex-sm-fill btn-lg nav-link "" id=""nav-info-tab"" data-bs-toggle=""tab"" type=""button"" role=""tab"" aria-controls=""nav-info"" aria-selected=""false"" b-wgmrqjvt82></button>
                    <button class=""flex-sm-fill btn-lg nav-link "" id=""nav-payment-tab"" data-bs-toggle=""tab"" type=""button"" role=""tab"" aria-controls=""nav-payment"" aria-selected=""false"" b-wgmrqjvt82></button>
                    ");
            __builder.OpenElement(43, "button");
            __builder.AddAttribute(44, "class", "flex-sm-fill" + " btn-lg" + " nav-link" + " " + (
#nullable restore
#line 52 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                 recieptBtnActive

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(45, "id", "nav-reciept-tab");
            __builder.AddAttribute(46, "data-bs-toggle", "tab");
            __builder.AddAttribute(47, "type", "button");
            __builder.AddAttribute(48, "role", "tab");
            __builder.AddAttribute(49, "aria-controls", "nav-reciept");
            __builder.AddAttribute(50, "aria-selected", "false");
            __builder.AddAttribute(51, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 52 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                                                                                                                                                                  ReceiptSection

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(52, "b-wgmrqjvt82");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(53, "\r\n            ");
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "tab-content");
            __builder.AddAttribute(56, "id", "nav-tabContent");
            __builder.AddAttribute(57, "b-wgmrqjvt82");
            __builder.AddMarkupContent(58, "<div class=\"d-flex justify-content-between align-items-center pb-4 pt-4\" style=\"font-size: 30px;\" b-wgmrqjvt82><span class=\"text-info\" b-wgmrqjvt82>Kvittan</span></div>\r\n                ");
            __builder.OpenElement(59, "div");
            __builder.AddAttribute(60, "class", "tab-pane fade show active");
            __builder.AddAttribute(61, "id", "nav-reciept");
            __builder.AddAttribute(62, "role", "tabpanel");
            __builder.AddAttribute(63, "aria-labelledby", "nav-reciept-tab");
            __builder.AddAttribute(64, "b-wgmrqjvt82");
            __builder.OpenElement(65, "div");
            __builder.AddAttribute(66, "class", "flex-wrapper row wow fadeIn text-info");
            __builder.AddAttribute(67, "b-wgmrqjvt82");
#nullable restore
#line 63 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                         if (displaySuccessAlert == true)
                        {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(68, @"<div class=""alert alert-success alert-dismissible fade show mt-4"" role=""alert"" b-wgmrqjvt82>
                                Títt keyp er nú framt!
                                <button type=""button"" class=""btn-close"" data-bs-dismiss=""alert"" aria-label=""Close"" b-wgmrqjvt82></button></div>");
#nullable restore
#line 69 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                             if (OrderItems != null && OrderItems.Count > 0)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(69, "div");
            __builder.AddAttribute(70, "class", "row text-info");
            __builder.AddAttribute(71, "b-wgmrqjvt82");
            __builder.AddMarkupContent(72, "Bíleggingarnummar: ");
            __builder.AddContent(73, 
#nullable restore
#line 71 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                               this.orderNumber

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(74, "\r\n                                ");
            __builder.OpenElement(75, "div");
            __builder.AddAttribute(76, "class", "row");
            __builder.AddAttribute(77, "b-wgmrqjvt82");
            __builder.OpenElement(78, "table");
            __builder.AddAttribute(79, "class", "table-light text-info");
            __builder.AddAttribute(80, "b-wgmrqjvt82");
            __builder.AddMarkupContent(81, @"<thead b-wgmrqjvt82><tr b-wgmrqjvt82><th b-wgmrqjvt82></th>
                                                <th b-wgmrqjvt82>Vøruheiti</th>
                                                <th class=""text-center"" b-wgmrqjvt82>Nøgd</th>
                                                <th class=""text-center"" b-wgmrqjvt82>Prísur</th></tr></thead>
                                        ");
            __builder.OpenElement(82, "tbody");
            __builder.AddAttribute(83, "b-wgmrqjvt82");
#nullable restore
#line 83 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                             foreach (var item in this.OrderItems)
                                            {
                                                if (this.token == false)
                                                {
                                                    this.total = item.Total;
                                                    this.token = true;
                                                }


#line default
#line hidden
#nullable disable
            __builder.OpenElement(84, "tr");
            __builder.AddAttribute(85, "b-wgmrqjvt82");
            __builder.OpenElement(86, "td");
            __builder.AddAttribute(87, "b-wgmrqjvt82");
            __builder.OpenElement(88, "div");
            __builder.AddAttribute(89, "class", "align-items-center overflow-hidden");
            __builder.AddAttribute(90, "style", "max-width:" + " 180px;" + " max-height:" + " 100px;" + " min-width:" + " 180px;" + " min-height:" + " 100px;" + " background:" + " url(" + (
#nullable restore
#line 92 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                                                                                                                                                          item.ImagePath

#line default
#line hidden
#nullable disable
            ) + ");" + " background-position:" + " 50%" + " 50%;" + " background-size:" + " cover;");
            __builder.AddAttribute(91, "b-wgmrqjvt82");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(92, "\r\n                                                    ");
            __builder.OpenElement(93, "td");
            __builder.AddAttribute(94, "b-wgmrqjvt82");
            __builder.AddContent(95, 
#nullable restore
#line 93 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                         item.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(96, "\r\n                                                    ");
            __builder.OpenElement(97, "td");
            __builder.AddAttribute(98, "class", "text-center");
            __builder.AddAttribute(99, "b-wgmrqjvt82");
            __builder.AddContent(100, 
#nullable restore
#line 94 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                             item.Amount

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(101, "\r\n                                                    ");
            __builder.OpenElement(102, "td");
            __builder.AddAttribute(103, "class", "text-center");
            __builder.AddAttribute(104, "b-wgmrqjvt82");
            __builder.AddContent(105, 
#nullable restore
#line 95 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                             item.Subtotal.ToString("N2")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 97 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                            }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(106, "tr");
            __builder.AddAttribute(107, "b-wgmrqjvt82");
            __builder.AddMarkupContent(108, "<td b-wgmrqjvt82></td>\r\n                                                <td b-wgmrqjvt82></td>\r\n                                                ");
            __builder.AddMarkupContent(109, "<td class=\"text-end\" b-wgmrqjvt82>Í alt:</td>\r\n                                                ");
            __builder.OpenElement(110, "td");
            __builder.AddAttribute(111, "class", "text-center");
            __builder.AddAttribute(112, "b-wgmrqjvt82");
            __builder.AddContent(113, 
#nullable restore
#line 102 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                                                                         this.total.ToString("N2")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 107 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 107 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                             
                        }
                        else if (displayDangerAlert == true)
                        {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(114, @"<div class=""alert alert-danger alert-dismissible fade show mt-4"" role=""alert"" b-wgmrqjvt82>
                                Keypið varð ikki gjøgnumført...
                                <button type=""button"" class=""btn-close"" data-bs-dismiss=""alert"" aria-label=""Close"" b-wgmrqjvt82></button></div>");
#nullable restore
#line 115 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(115, @"<div class=""row pt-4 text-center"" b-wgmrqjvt82><div class=""col text-center"" b-wgmrqjvt82><a class=""btn btn-success btn-lg"" type=""button"" href=""/soelumidstoedin"" b-wgmrqjvt82>
                                    Sølumiðstøðin
                                </a></div></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 130 "C:\Users\jonsi\ASP.NETProjects\treyd\treyd\treyd\Pages\ReceiptPage.razor"
       
    [CascadingParameter] CartStateProvider CartStateProvider { get; set; }

    [Parameter] public int Id { get; set; }

    protected OrderModel Order { get; set; }
    private ProductModel ProductModel { get; set; }

    private List<ProductModel> Products;
    private List<OrderItemsModel> OrderItems;

    private string cartActive;
    private string paymentActive;
    private string recieptActive;

    private string cartBtnActive;
    private string paymentBtnActive;
    private string recieptBtnActive;

    private bool displaySuccessAlert = false;
    private bool displayDangerAlert = false;

    private string orderNumber = "";
    bool token = false;
    private double total = 0;

    protected override async Task OnInitializedAsync()
    {
        await ((TreydAuthenticationStateProvider)AuthenticationStateProvider).GetAuthenticationStateAsync();

        ReceiptSection();

        var uri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri); //you can use IURIHelper for older versions

        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("id", out var id))
        {
            this.orderNumber = id.First();
        }

        await VerifyPayment();
    }

    public void ReceiptSection()
    {
        this.cartActive = "active";
        this.paymentActive = "active";
        this.recieptActive = "active";
        this.cartBtnActive = "";
        this.paymentBtnActive = "";
        this.recieptBtnActive = "active";
    }

    protected async Task<bool> LoadOrder()
    {
        try
        {
            string sql = "select * from orders join payments on orders.PaymentID = payments.PaymentID where OrderNumber = @OrderNumber";
            Order = await _data.QuerySingle<OrderModel, dynamic>(sql, new { OrderNumber = long.Parse(this.orderNumber) }, _config.GetConnectionString("default"));

            return await Task.FromResult(true);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);

            return await Task.FromResult(false);
        }
    }

    protected async Task<bool> LoadProducts()
    {
        try
        {
            string sql = "select * from products";
            Products = await _data.LoadData<ProductModel, dynamic>(sql, new { }, _config.GetConnectionString("default"));

            return await Task.FromResult(true);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);

            return await Task.FromResult(false);
        }
    }

    protected async Task<bool> LoadOrderItems()
    {
        try
        {
            string sql = "select * from order_items " +
                    "inner join products " +
                    "on order_items.ProductID = products.ProductID " +
                    "inner join orders " +
                    "on order_items.OrderID = orders.OrderID " +
                    "where orders.OrderNumber = @OrderNumber";
            OrderItems = await _data.LoadData<OrderItemsModel, dynamic>(sql, new { OrderNumber = this.orderNumber }, _config.GetConnectionString("default"));

            return await Task.FromResult(true);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);

            return await Task.FromResult(false);
        }
    }

    protected async Task<bool> VerifyPayment()
    {
        await LoadOrder();
        await LoadProducts();

        if (Order != null)
        {
            try
            {
                this.displaySuccessAlert = true;

                await SaveOrderItems();
                await LoadOrderItems();
                await DeleteCartItems();

                return await Task.FromResult(true);
            }
            catch (Exception e)
            {
                Console.WriteLine(e);

                return await Task.FromResult(false);
            }
        }
        else
        {
            this.displayDangerAlert = true;

            return await Task.FromResult(false);
        }
    }

    protected async Task<bool> SaveOrderItems()
    {
        if (CartStateProvider.Cart.CartItems != null && CartStateProvider.Cart.CartItems.Count > 0)
        {
            try
            {
                foreach (var item in CartStateProvider.Cart.CartItems)
                {
                    int ItemID = item.Product.ProductID;

                    foreach (var product in Products)
                    {
                        if (product.ProductID == ItemID)
                        {
                            string sql = "insert into order_items (Amount, Subtotal, OrderID, ProductID, Status, Registered)" +
                            "values (@Amount, @Subtotal, @OrderID, @ProductID, @Status, @Registered);";

                            await _data.SaveData(sql, new
                            {
                                Amount = item.Quantity,
                                Subtotal = item.Product.Price,
                                OrderID = Order.OrderID,
                                ProductID = ItemID,
                                Status = "Pending",
                                Registered = DateTime.Now
                            }
                            , _config.GetConnectionString("default"));

                            string sql1 = "update products set Quantity = @Quantity where ProductID = @ProductID";

                            int quantity = product.Quantity - item.Quantity;

                            if (quantity == 0 || quantity < 0)
                            {
                                quantity = 0;
                                item.Product.InStock = false;
                            }

                            await _data.SaveData(sql1, new
                            {
                                ProductID = item.Product.ProductID,
                                Quantity = quantity,
                            }
                            , _config.GetConnectionString("default"));
                        }
                    }
                }

                return await Task.FromResult(true);
            }
            catch (Exception e)
            {
                Console.WriteLine(e);

                return await Task.FromResult(false);
            }
        }
        else
        {
            return await Task.FromResult(false);
        }
    }

    protected async Task<bool> DeleteCartItems()
    {
        try
        {
            CartStateProvider.Cart.CartItems.Clear(); // Removing items from cart
            await CartStateProvider.SaveChangesAsync(); // Update cart and save to local storage

            CartStateProvider.OnChange += StateHasChanged;

            return await Task.FromResult(true);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);

            return await Task.FromResult(false);
        }
    }

    public void Dispose()
    {
        CartStateProvider.OnChange -= StateHasChanged;
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ProtectedSessionStorage SessionStorage { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private StateContainer StateContainer { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration _config { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IDataAccess _data { get; set; }
    }
}
#pragma warning restore 1591
